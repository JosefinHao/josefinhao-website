{% extends "base.html" %}

{% block title %}Cat Cafe - Josefin Hao{% endblock %}

{% block body_attrs %} data-page="cat-cafe"{% endblock %}

{% block content %}
<div class="cat-cafe-container">
    <!-- Welcome message -->
    <div class="cat-cafe-intro">
        <h1>Welcome to the Cat Cafe</h1>
        <p>Play games to exercise the cat and earn points. Use points to feed the cat.</p>
    </div>

    <!-- Food Bowl Icon (Left Side) -->
    <div class="food-bowl-container">
        <button class="food-bowl-btn" id="foodBowlBtn" title="Feed Cat (10 points)">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" style="width: 60px; height: 60px;">
                <!-- Cat food bowl -->
                <defs>
                    <linearGradient id="bowlGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#FF6B9D;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#FF4081;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <!-- Bowl base shadow -->
                <ellipse cx="50" cy="85" rx="32" ry="5" fill="#000" opacity="0.2"/>
                <!-- Bowl outer rim -->
                <path d="M 20 40 L 25 75 Q 25 82, 32 85 L 68 85 Q 75 82, 75 75 L 80 40 Z"
                      fill="url(#bowlGradient)" stroke="#E63871" stroke-width="2"/>
                <!-- Bowl rim highlight -->
                <ellipse cx="50" cy="40" rx="30" ry="8" fill="#FFB3D1" opacity="0.6"/>
                <!-- Bowl inner -->
                <ellipse cx="50" cy="42" rx="28" ry="6" fill="#FF8FB3"/>
                <!-- Food in bowl -->
                <circle cx="45" cy="55" r="6" fill="#8B4513"/>
                <circle cx="55" cy="52" r="6" fill="#A0522D"/>
                <circle cx="50" cy="60" r="5" fill="#8B4513"/>
                <circle cx="42" cy="48" r="4" fill="#A0522D"/>
                <circle cx="58" cy="58" r="5" fill="#8B4513"/>
                <!-- Highlights on food -->
                <circle cx="47" cy="53" r="2" fill="#D2691E" opacity="0.6"/>
                <circle cx="56" cy="50" r="2" fill="#D2691E" opacity="0.6"/>
            </svg>
        </button>
        <div class="points-display">
            <span class="points-label">Points:</span>
            <span class="points-value" id="pointsDisplay">0</span>
        </div>
        <div class="size-display">
            <span class="size-label">Cat Size:</span>
            <span class="size-value" id="catSizeDisplay">1.0</span>
        </div>
    </div>

    <!-- Game Icons Container (Right Side) -->
    <div class="game-icons-right">
        <!-- Wand Game Icon -->
        <button class="game-icon-btn wand-game-btn" id="wandGameBtn" title="Play Wand Game">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" style="width: 60px; height: 60px;">
                <!-- Cat teaser wand with feathers -->
                <defs>
                    <linearGradient id="featherPink" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#FF8FB3;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#E05588;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="featherPurple" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#C78BE8;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#8E44AD;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="featherBlue" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#90CAF9;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#5AA3E6;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <!-- Wooden handle -->
                <line x1="15" y1="20" x2="55" y2="55" stroke="#8B7355" stroke-width="3" stroke-linecap="round"/>
                <line x1="15" y1="20" x2="55" y2="55" stroke="#A68A6E" stroke-width="1.5" stroke-linecap="round" opacity="0.6"/>
                <!-- String -->
                <path d="M 55 55 Q 58 60, 60 63" stroke="#D4AF37" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                <!-- Pink feather -->
                <g transform="rotate(-20 65 70)">
                    <line x1="65" y1="65" x2="65" y2="85" stroke="#D4669C" stroke-width="1.2"/>
                    <path d="M 65 65 Q 58 72, 57 78 Q 59 82, 65 85" fill="url(#featherPink)" opacity="0.9"/>
                    <path d="M 65 65 Q 72 72, 73 78 Q 71 82, 65 85" fill="url(#featherPink)" opacity="0.9"/>
                </g>
                <!-- Purple feather -->
                <g transform="rotate(10 75 72)">
                    <line x1="75" y1="68" x2="75" y2="86" stroke="#9551C7" stroke-width="1.2"/>
                    <path d="M 75 68 Q 69 74, 68 80 Q 70 84, 75 86" fill="url(#featherPurple)" opacity="0.9"/>
                    <path d="M 75 68 Q 81 74, 82 80 Q 80 84, 75 86" fill="url(#featherPurple)" opacity="0.9"/>
                </g>
                <!-- Blue feather -->
                <g transform="rotate(-5 70 75)">
                    <line x1="70" y1="70" x2="70" y2="88" stroke="#5AA3E6" stroke-width="1.2"/>
                    <path d="M 70 70 Q 64 76, 63 82 Q 65 86, 70 88" fill="url(#featherBlue)" opacity="0.9"/>
                    <path d="M 70 70 Q 76 76, 77 82 Q 75 86, 70 88" fill="url(#featherBlue)" opacity="0.9"/>
                </g>
                <!-- Small bell -->
                <circle cx="60" cy="63" r="3" fill="#FFD700" stroke="#DAA520" stroke-width="0.5"/>
            </svg>
        </button>

        <!-- Yarn Ball Game Icon -->
        <button class="game-icon-btn yarn-game-btn" id="yarnGameBtn" title="Play Yarn Ball Bounce">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" style="width: 60px; height: 60px;">
                <!-- Yarn ball -->
                <defs>
                    <radialGradient id="yarnGradient" cx="40%" cy="40%">
                        <stop offset="0%" style="stop-color:#FF9EC4;stop-opacity:1" />
                        <stop offset="50%" style="stop-color:#FF6B9D;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#E05588;stop-opacity:1" />
                    </radialGradient>
                </defs>
                <!-- Shadow -->
                <ellipse cx="52" cy="85" rx="25" ry="5" fill="#000" opacity="0.2"/>
                <!-- Ball base -->
                <circle cx="50" cy="50" r="32" fill="url(#yarnGradient)"/>
                <!-- Yarn strands wrapping around -->
                <path d="M 22 45 Q 35 42, 50 40 Q 65 42, 78 45" stroke="#FFB3D1" stroke-width="2.5" fill="none" opacity="0.8"/>
                <path d="M 25 55 Q 38 52, 50 50 Q 62 52, 75 55" stroke="#FF8FB3" stroke-width="2.5" fill="none" opacity="0.7"/>
                <path d="M 28 35 Q 40 33, 50 32 Q 60 33, 72 35" stroke="#FFD4E5" stroke-width="2" fill="none" opacity="0.6"/>
                <path d="M 30 65 Q 42 62, 50 61 Q 58 62, 70 65" stroke="#FF80AB" stroke-width="2.5" fill="none" opacity="0.7"/>
                <!-- Curved strands -->
                <path d="M 35 25 Q 45 28, 50 30" stroke="#FFB3D1" stroke-width="2" fill="none" opacity="0.6"/>
                <path d="M 65 25 Q 55 28, 50 30" stroke="#FF8FB3" stroke-width="2" fill="none" opacity="0.6"/>
                <path d="M 35 75 Q 45 72, 50 70" stroke="#FFD4E5" stroke-width="2" fill="none" opacity="0.6"/>
                <path d="M 65 75 Q 55 72, 50 70" stroke="#FF80AB" stroke-width="2" fill="none" opacity="0.6"/>
                <!-- Loose yarn strand -->
                <path d="M 78 48 Q 85 52, 88 58 Q 86 64, 82 68" stroke="#FF6B9D" stroke-width="2.5" fill="none" stroke-linecap="round" opacity="0.9"/>
                <path d="M 82 68 Q 78 72, 75 75" stroke="#FF6B9D" stroke-width="2" fill="none" stroke-linecap="round" opacity="0.8"/>
                <!-- Highlights -->
                <circle cx="38" cy="38" r="6" fill="#FFE4ED" opacity="0.7"/>
                <circle cx="42" cy="42" r="3" fill="#FFF" opacity="0.5"/>
            </svg>
        </button>

        <!-- Meow Melody Game Icon -->
        <button class="game-icon-btn melody-game-btn" id="melodyGameBtn" title="Play Meow Melody">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" style="width: 60px; height: 60px;">
                <!-- Musical notes -->
                <defs>
                    <linearGradient id="noteGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#9C27B0;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#7B1FA2;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <!-- First note (eighth note) -->
                <ellipse cx="35" cy="70" rx="8" ry="6" fill="url(#noteGradient)" transform="rotate(-20 35 70)"/>
                <rect x="42" y="30" width="3" height="40" fill="url(#noteGradient)" rx="1.5"/>
                <circle cx="43.5" cy="30" r="2" fill="#CE93D8"/>

                <!-- Second note (eighth note) -->
                <ellipse cx="60" cy="65" rx="8" ry="6" fill="url(#noteGradient)" transform="rotate(-20 60 65)"/>
                <rect x="67" y="20" width="3" height="45" fill="url(#noteGradient)" rx="1.5"/>
                <circle cx="68.5" cy="20" r="2" fill="#CE93D8"/>

                <!-- Connecting beam between notes -->
                <path d="M 45 30 L 70 20 L 70 28 L 45 38 Z" fill="url(#noteGradient)" opacity="0.9"/>

                <!-- Small eighth note -->
                <ellipse cx="75" cy="75" rx="6" ry="5" fill="url(#noteGradient)" transform="rotate(-20 75 75)"/>
                <rect x="80" y="45" width="2.5" height="30" fill="url(#noteGradient)" rx="1.2"/>
                <path d="M 82.5 45 Q 88 42, 90 48" stroke="url(#noteGradient)" stroke-width="2.5" fill="none" stroke-linecap="round"/>

                <!-- Decorative elements -->
                <circle cx="25" cy="40" r="3" fill="#E1BEE7" opacity="0.6"/>
                <circle cx="85" cy="35" r="2.5" fill="#E1BEE7" opacity="0.6"/>
                <circle cx="50" cy="85" r="2" fill="#CE93D8" opacity="0.5"/>
            </svg>
        </button>
    </div>

    <!-- Message Display -->
    <div class="cafe-message" id="cafeMessage"></div>

    <!-- Main Canvas -->
    <canvas id="cat-cafe-canvas"></canvas>

    <!-- Wand Mini-Game Overlay -->
    <div class="wand-game-overlay" id="wandGameOverlay" style="display: none;">
        <div class="wand-game-modal">
            <button class="wand-game-close" id="wandGameClose">‚úï</button>

            <h2>üêæ Cat Wand Game</h2>
            <p class="wand-game-instructions">Click the wand before it disappears!</p>

            <div class="wand-game-stats">
                <div class="stat-item">
                    <span class="stat-label">Score</span>
                    <span class="stat-value" id="wandScore">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Time</span>
                    <span class="stat-value" id="wandTime">30</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Best</span>
                    <span class="stat-value" id="wandBest">0</span>
                </div>
            </div>

            <div class="wand-game-area" id="wandGameArea">
                <!-- Wand positions -->
                <div class="wand-position left" data-position="0"></div>
                <div class="wand-position middle" data-position="1"></div>
                <div class="wand-position right" data-position="2"></div>

                <!-- Wand element -->
                <div class="wand" id="wand" style="display: none;">
                    <svg class="wand-image" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- BASE/HANDLE at top center (this stays fixed at top) -->
                        <circle cx="100" cy="15" r="8" fill="#6D5D4B" opacity="0.8"/>
                        <circle cx="100" cy="15" r="5" fill="#8B7355" opacity="0.6"/>

                        <!-- Wooden stick extending downward from base -->
                        <line x1="100" y1="15" x2="100" y2="75" stroke="#8B7355" stroke-width="4" stroke-linecap="round"/>
                        <line x1="100" y1="15" x2="100" y2="75" stroke="#A68A6E" stroke-width="2" stroke-linecap="round" opacity="0.6"/>

                        <!-- String/cord at the tip -->
                        <path d="M 100 75 Q 102 80, 100 83" stroke="#D4AF37" stroke-width="1.5" fill="none" stroke-linecap="round"/>

                        <!-- FEATHERS at the tip/bottom (the clickable target area) -->
                        <!-- Pink feather 1 - Realistic shape -->
                        <g transform="rotate(-15 100 100)">
                            <animate attributeName="transform" values="rotate(-15 100 100);rotate(-12 100 100);rotate(-18 100 100);rotate(-15 100 100)" dur="2s" repeatCount="indefinite"/>
                            <!-- Feather shaft -->
                            <line x1="100" y1="85" x2="100" y2="125" stroke="#D4669C" stroke-width="1.5" opacity="0.9"/>
                            <!-- Feather vane - left side -->
                            <path d="M 100 85 Q 90 95, 88 105 Q 89 110, 92 115 Q 95 120, 100 125"
                                  fill="url(#pinkGrad)" stroke="#FF6B9D" stroke-width="0.5" opacity="0.95"/>
                            <!-- Feather vane - right side -->
                            <path d="M 100 85 Q 110 95, 112 105 Q 111 110, 108 115 Q 105 120, 100 125"
                                  fill="url(#pinkGrad)" stroke="#FF6B9D" stroke-width="0.5" opacity="0.95"/>
                            <!-- Barbs detail -->
                            <path d="M 100 90 L 95 93 M 100 95 L 94 99 M 100 100 L 93 105 M 100 105 L 94 110 M 100 110 L 96 115"
                                  stroke="#FF8FB3" stroke-width="0.3" opacity="0.6"/>
                            <path d="M 100 90 L 105 93 M 100 95 L 106 99 M 100 100 L 107 105 M 100 105 L 106 110 M 100 110 L 104 115"
                                  stroke="#FF8FB3" stroke-width="0.3" opacity="0.6"/>
                        </g>

                        <!-- Purple feather 2 - Realistic shape -->
                        <g transform="rotate(5 115 105)">
                            <animate attributeName="transform" values="rotate(5 115 105);rotate(8 115 105);rotate(2 115 105);rotate(5 115 105)" dur="2.3s" repeatCount="indefinite"/>
                            <!-- Feather shaft -->
                            <line x1="115" y1="90" x2="115" y2="127" stroke="#9551C7" stroke-width="1.5" opacity="0.9"/>
                            <!-- Feather vane - left side -->
                            <path d="M 115 90 Q 106 100, 104 110 Q 105 115, 108 121 Q 111 125, 115 127"
                                  fill="url(#purpleGrad)" stroke="#B565D8" stroke-width="0.5" opacity="0.95"/>
                            <!-- Feather vane - right side -->
                            <path d="M 115 90 Q 124 100, 126 110 Q 125 115, 122 121 Q 119 125, 115 127"
                                  fill="url(#purpleGrad)" stroke="#B565D8" stroke-width="0.5" opacity="0.95"/>
                            <!-- Barbs detail -->
                            <path d="M 115 95 L 110 99 M 115 100 L 109 105 M 115 105 L 108 111 M 115 110 L 110 116 M 115 115 L 111 120"
                                  stroke="#C78BE8" stroke-width="0.3" opacity="0.6"/>
                            <path d="M 115 95 L 120 99 M 115 100 L 121 105 M 115 105 L 122 111 M 115 110 L 120 116 M 115 115 L 119 120"
                                  stroke="#C78BE8" stroke-width="0.3" opacity="0.6"/>
                        </g>

                        <!-- Bright pink/magenta feather 3 - Realistic shape -->
                        <g transform="rotate(-25 85 103)">
                            <animate attributeName="transform" values="rotate(-25 85 103);rotate(-22 85 103);rotate(-28 85 103);rotate(-25 85 103)" dur="1.8s" repeatCount="indefinite"/>
                            <!-- Feather shaft -->
                            <line x1="85" y1="88" x2="85" y2="123" stroke="#E63871" stroke-width="1.5" opacity="0.9"/>
                            <!-- Feather vane - left side -->
                            <path d="M 85 88 Q 77 97, 75 107 Q 76 112, 78 117 Q 81 121, 85 123"
                                  fill="url(#magentaGrad)" stroke="#FF4081" stroke-width="0.5" opacity="0.95"/>
                            <!-- Feather vane - right side -->
                            <path d="M 85 88 Q 93 97, 95 107 Q 94 112, 92 117 Q 89 121, 85 123"
                                  fill="url(#magentaGrad)" stroke="#FF4081" stroke-width="0.5" opacity="0.95"/>
                            <!-- Barbs detail -->
                            <path d="M 85 93 L 81 97 M 85 98 L 80 103 M 85 103 L 79 109 M 85 108 L 80 114 M 85 113 L 82 118"
                                  stroke="#FF80AB" stroke-width="0.3" opacity="0.6"/>
                            <path d="M 85 93 L 89 97 M 85 98 L 90 103 M 85 103 L 91 109 M 85 108 L 90 114 M 85 113 L 88 118"
                                  stroke="#FF80AB" stroke-width="0.3" opacity="0.6"/>
                        </g>

                        <!-- Light blue feather 4 - Realistic shape -->
                        <g transform="rotate(10 108 115)">
                            <animate attributeName="transform" values="rotate(10 108 115);rotate(13 108 115);rotate(7 108 115);rotate(10 108 115)" dur="2.1s" repeatCount="indefinite"/>
                            <!-- Feather shaft -->
                            <line x1="108" y1="100" x2="108" y2="133" stroke="#5AA3E6" stroke-width="1.5" opacity="0.9"/>
                            <!-- Feather vane - left side -->
                            <path d="M 108 100 Q 100 109, 98 119 Q 99 124, 101 129 Q 104 132, 108 133"
                                  fill="url(#blueGrad)" stroke="#64B5F6" stroke-width="0.5" opacity="0.95"/>
                            <!-- Feather vane - right side -->
                            <path d="M 108 100 Q 116 109, 118 119 Q 117 124, 115 129 Q 112 132, 108 133"
                                  fill="url(#blueGrad)" stroke="#64B5F6" stroke-width="0.5" opacity="0.95"/>
                            <!-- Barbs detail -->
                            <path d="M 108 105 L 104 109 M 108 110 L 103 115 M 108 115 L 102 121 M 108 120 L 103 126 M 108 125 L 105 129"
                                  stroke="#90CAF9" stroke-width="0.3" opacity="0.6"/>
                            <path d="M 108 105 L 112 109 M 108 110 L 113 115 M 108 115 L 114 121 M 108 120 L 113 126 M 108 125 L 111 129"
                                  stroke="#90CAF9" stroke-width="0.3" opacity="0.6"/>
                        </g>

                        <!-- Yellow/orange feather 5 - Realistic shape -->
                        <g transform="rotate(-8 92 113)">
                            <animate attributeName="transform" values="rotate(-8 92 113);rotate(-5 92 113);rotate(-11 92 113);rotate(-8 92 113)" dur="2.5s" repeatCount="indefinite"/>
                            <!-- Feather shaft -->
                            <line x1="92" y1="101" x2="92" y2="128" stroke="#E8B844" stroke-width="1.3" opacity="0.9"/>
                            <!-- Feather vane - left side -->
                            <path d="M 92 101 Q 86 109, 84 117 Q 85 121, 87 124 Q 89 126, 92 128"
                                  fill="url(#yellowGrad)" stroke="#FFD54F" stroke-width="0.5" opacity="0.95"/>
                            <!-- Feather vane - right side -->
                            <path d="M 92 101 Q 98 109, 100 117 Q 99 121, 97 124 Q 95 126, 92 128"
                                  fill="url(#yellowGrad)" stroke="#FFD54F" stroke-width="0.5" opacity="0.95"/>
                            <!-- Barbs detail -->
                            <path d="M 92 106 L 89 110 M 92 111 L 88 116 M 92 116 L 87 121 M 92 121 L 89 125"
                                  stroke="#FFEB99" stroke-width="0.3" opacity="0.6"/>
                            <path d="M 92 106 L 95 110 M 92 111 L 96 116 M 92 116 L 97 121 M 92 121 L 95 125"
                                  stroke="#FFEB99" stroke-width="0.3" opacity="0.6"/>
                        </g>

                        <!-- Gradient definitions for realistic feather colors -->
                        <defs>
                            <linearGradient id="pinkGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#FF8FB3;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#FF6B9D;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#E05588;stop-opacity:0.9" />
                            </linearGradient>
                            <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#C78BE8;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#B565D8;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#8E44AD;stop-opacity:0.9" />
                            </linearGradient>
                            <linearGradient id="magentaGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#FF80AB;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#FF4081;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#E63871;stop-opacity:0.9" />
                            </linearGradient>
                            <linearGradient id="blueGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#90CAF9;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#64B5F6;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#5AA3E6;stop-opacity:0.9" />
                            </linearGradient>
                            <linearGradient id="yellowGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#FFEB99;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#FFD54F;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#E8B844;stop-opacity:0.9" />
                            </linearGradient>
                        </defs>

                        <!-- Bell at attachment point -->
                        <circle cx="100" cy="80" r="4" fill="#FFD700" stroke="#DAA520" stroke-width="0.5"/>
                        <circle cx="100" cy="80" r="2" fill="#FFF" opacity="0.6"/>
                    </svg>
                </div>

                <!-- Cat paw -->
                <div class="cat-paw" id="catPaw">
                    <div class="paw-pad"></div>
                    <div class="paw-toe"></div>
                    <div class="paw-toe"></div>
                    <div class="paw-toe"></div>
                </div>
            </div>

            <button class="wand-game-start" id="wandGameStart">Start Game</button>

            <div class="wand-leaderboard">
                <h3>üèÜ Leaderboard</h3>
                <ol id="wandLeaderboardList">
                    <li>No scores yet</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- Yarn Ball Bounce Mini-Game Overlay -->
    <div class="yarn-game-overlay" id="yarnGameOverlay" style="display: none;">
        <div class="yarn-game-modal">
            <button class="yarn-game-close" id="yarnGameClose">‚úï</button>

            <h2>üß∂ Yarn Ball Bounce</h2>
            <p class="yarn-game-instructions">Click yarn balls to bat them away! Don't let them reach the bottom!</p>

            <div class="yarn-game-stats">
                <div class="stat-item">
                    <span class="stat-label">Score</span>
                    <span class="stat-value" id="yarnScore">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Lives</span>
                    <span class="stat-value" id="yarnLives">3</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Best</span>
                    <span class="stat-value" id="yarnBest">0</span>
                </div>
            </div>

            <canvas id="yarnCanvas" width="500" height="400"></canvas>

            <button class="yarn-game-start" id="yarnGameStart">Start Game</button>

            <div class="yarn-leaderboard">
                <h3>üèÜ Leaderboard</h3>
                <ol id="yarnLeaderboardList">
                    <li>No scores yet</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- Meow Melody Mini-Game Overlay -->
    <div class="melody-game-overlay" id="melodyGameOverlay" style="display: none;">
        <div class="melody-game-modal">
            <button class="melody-game-close" id="melodyGameClose">‚úï</button>

            <h2>üéµ Meow Melody</h2>
            <p class="melody-game-instructions">Watch the pattern, then repeat it!</p>

            <div class="melody-game-stats">
                <div class="stat-item">
                    <span class="stat-label">Round</span>
                    <span class="stat-value" id="melodyRound">1</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Score</span>
                    <span class="stat-value" id="melodyScore">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Best</span>
                    <span class="stat-value" id="melodyBest">0</span>
                </div>
            </div>

            <div class="melody-game-area" id="melodyGameArea">
                <div class="melody-toys">
                    <div class="melody-toy ball" data-toy="0" data-sound="meow1">
                        <div class="toy-icon">üß∂</div>
                        <div class="toy-label">Yarn Ball</div>
                    </div>
                    <div class="melody-toy mouse" data-toy="1" data-sound="meow2">
                        <div class="toy-icon">üêÅ</div>
                        <div class="toy-label">Mouse</div>
                    </div>
                    <div class="melody-toy feather" data-toy="2" data-sound="meow3">
                        <div class="toy-icon">ü¶ã</div>
                        <div class="toy-label">Butterfly</div>
                    </div>
                    <div class="melody-toy fish" data-toy="3" data-sound="meow4">
                        <div class="toy-icon">üê†</div>
                        <div class="toy-label">Fish</div>
                    </div>
                </div>
            </div>

            <button class="melody-game-start" id="melodyGameStart">Start Game</button>

            <div class="melody-leaderboard">
                <h3>üèÜ Leaderboard</h3>
                <ol id="melodyLeaderboardList">
                    <li>No scores yet</li>
                </ol>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/cat-cafe-game.js') }}"></script>
{% endblock %}
